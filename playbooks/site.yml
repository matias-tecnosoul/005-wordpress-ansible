---
#playbooks/site.yml
- name: "Instalar WordPress con MySQL usando Galaxy roles"
  hosts: wordpress
  become: yes
  gather_facts: yes

  vars_files:
    - ../group_vars/all.yml
  
  pre_tasks:
    - name: "Actualizar cache de paquetes"
      package:
        update_cache: yes
      changed_when: false
    
    - name: "InformaciÃ³n sobre roles Galaxy"
      debug:
        msg:
          - "ğŸ­ Usando roles de Ansible Galaxy:"
          - "  - geerlingguy.mysql (base de datos)"
          - "  - matias_tecnosoul.wordpress_webserver (webserver)"
          - "ğŸ“¦ Roles instalados automÃ¡ticamente desde Galaxy"

  roles:
    - role: geerlingguy.mysql
      tags: ['mysql', 'database']
        
    - role: matias_tecnosoul.wordpress_webserver
      tags: ['wordpress', 'webserver']

  post_tasks:
    - name: "InformaciÃ³n de acceso a WordPress"
      debug:
        msg:
          - "ğŸ‰ WordPress instalado exitosamente usando Galaxy roles!"
          - "ğŸŒ URL: http://{{ wordpress_domain }} o http://{{ ansible_host }}"
          - "ğŸ“š Database-agnostic design - configurable con cualquier DB"
          - "ğŸ”§ Multi-distro support: Ubuntu, Debian, Rocky Linux"
